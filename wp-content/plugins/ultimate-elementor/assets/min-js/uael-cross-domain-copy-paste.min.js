!function(e){var n=["uael","uael_section","uael_column"],t=["widget","column","section"];xsLocalStorage.init({iframeUrl:uael_cross_domain.cross_domain_cdn,initCallback:function(){}}),UAE_Cross_Domain_Handler={paste:function(e,n){var t=null,a={index:0},o=e.widgetCode,i=JSON.stringify(o),s=o.elType,r=/\.(jpg|png|jpeg|gif|svg)/gi.test(i),l={elType:s,settings:o.settings},c=n,d=n.model.get("elType");switch(s){case"section":switch(l.elements=UAE_Cross_Domain_Handler.generateUniqueID(o.elements),t=elementor.getPreviewContainer(),d){case"widget":a.index=c.getContainer().parent.parent.view.getOption("_index")+1;break;case"column":a.index=c.getContainer().parent.view.getOption("_index")+1;break;case"section":a.index=c.getOption("_index")+1}break;case"column":switch(l.elements=UAE_Cross_Domain_Handler.generateUniqueID(o.elements),d){case"widget":t=c.getContainer().parent.parent,a.index=c.getContainer().parent.view.getOption("_index")+1;break;case"column":t=c.getContainer().parent,a.index=c.getOption("_index")+1;break;case"section":t=c.getContainer()}break;case"widget":switch(l.widgetType=o.widgetType,t=c.getContainer(),d){case"widget":t=c.getContainer().parent,a.index=c.getOption("_index")+1;break;case"column":t=c.getContainer();break;case"section":t=c.children.findByIndex(0).getContainer()}}var m=$e.run("document/elements/create",{model:l,container:t,options:a});void 0==m&&("widget"===d?c.$el.next(".undefined.elementor-widget-empty")&&c.$el.next(".undefined.elementor-widget-empty").after('<div class="elementor-alert elementor-alert-warning">'+uael_cross_domain.widget_not_found+"</div>"):c.$el.find(".undefined.elementor-widget-empty")&&c.$el.find(".undefined.elementor-widget-empty").after('<div class="elementor-alert elementor-alert-warning">'+uael_cross_domain.widget_not_found+"</div>")),r&&jQuery.ajax({url:uael_cross_domain.ajaxURL,method:"POST",data:{nonce:uael_cross_domain.nonce,action:"uael_process_import",content:i},beforeSend:function(){m.view.$el.addClass("uael-processing-import")}}).done(function(e){if(e.success){var n=e.data[0];l.elType=n.elType,l.settings=n.settings,"widget"===l.elType?l.widgetType=n.widgetType:l.elements=n.elements,$e.run("document/elements/delete",{container:m}),$e.run("document/elements/create",{model:l,container:t,options:a})}})},generateUniqueID:function(e){return e.forEach(function(e,n){void 0!==elementorCommon.helpers.getUniqueId()?e.id=elementorCommon.helpers.getUniqueId():e.id=elementor.helpers.getUniqueID(),e.elements.length>0&&UAE_Cross_Domain_Handler.generateUniqueID(e.elements)}),e},getData:function(e,n){var t=JSON.stringify(e);jQuery.ajax({url:uael_cross_domain.ajaxURL,method:"POST",data:{action:"uael_process_import",nonce:uael_cross_domain.nonce,content:t},beforeSend:function(){n.attr("data-uael-fpcp-text","Pasting the content...")}}).done(function(e){if(e.success){n.attr("data-uael-fpcp-text","Processing the content...");var t=e.data[0];uael_cross_domain.elementorCompatible?elementor.sections.currentView.addChildModel(t):elementor.previewView.addChildModel(t),n.attr("data-uael-fpcp-text","Processing Completed");var a=setTimeout(function(){n.removeClass("uael-fpcp-wait"),"uael-icon-uae"==uael_cross_domain.cross_domain_icon&&n.find("body").removeClass("uael-fpcp-wait__icon"),elementor.notifications.showToast({message:elementor.translate("Entire Page Content Is Pasted!")}),clearTimeout(a)},60)}}).fail(function(){n.attr("data-uael-fpcp-text",""),n.removeClass("uael-fpcp-wait"),"uael-icon-uae"==uael_cross_domain.cross_domain_icon&&n.find("body").removeClass("uael-fpcp-wait__icon"),elementor.notifications.showToast({message:elementor.translate("Something went wrong!")})})}},n.forEach(function(e,a){elementor.hooks.addFilter("elements/"+t[a]+"/contextMenuGroups",function(e,t){return e.push({name:n[a],actions:[{name:"copy",title:uael_cross_domain.uae_copy,icon:uael_cross_domain.cross_domain_icon,callback:function(){var e={widgetType:t.model.get("widgetType"),widgetCode:t.model.toJSON()};xsLocalStorage.setItem("bsf_uael_container_new",JSON.stringify(e))}},{name:"paste",title:uael_cross_domain.uae_paste,icon:uael_cross_domain.cross_domain_icon,callback:function(){var e="";xsLocalStorage.getItem("bsf_uael_container_new",function(n){e=JSON.parse(n.value),UAE_Cross_Domain_Handler.paste(e,t)})}},{name:"copy_all",title:uael_cross_domain.uae_copy_all,icon:uael_cross_domain.cross_domain_icon,callback:function(){var e=Object.values(elementor.getPreviewView().children._views).map(function(e){return e.getContainer()}).map(function(e){return e.model.toJSON()});xsLocalStorage.setItem("bsf_uael_all_sections",JSON.stringify(e),function(e){elementor.notifications.showToast({message:elementor.translate("Entire Page Content Is Copied!")})})}},{name:"paste_all",title:uael_cross_domain.uae_paste_all,icon:uael_cross_domain.cross_domain_icon,callback:function(){var e="";xsLocalStorage.getItem("bsf_uael_all_sections",function(n){var t=elementor.$previewContents.find("html");t.addClass("uael-fpcp-wait").attr("data-uael-fpcp-text","Starting the process..."),"uael-icon-uae"==uael_cross_domain.cross_domain_icon&&t.find("body").addClass("uael-fpcp-wait__icon"),e=JSON.parse(n.value),UAE_Cross_Domain_Handler.getData(e,t)})}}]}),e})})}(jQuery);